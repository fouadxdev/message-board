<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title><%= title %></title>
  
  <form action="/" method="GET" style="margin: 20px 0;">
  <input 
    type="text" 
    name="search" 
    placeholder="Search by username..." 
    value="<%= searchTerm %>"
    style="padding: 8px; width: 300px; border: 1px solid #ddd; border-radius: 3px;"
  >
  <button 
    type="submit"
    style="padding: 8px 20px; background-color: #28a745; color: white; border: none; border-radius: 3px; cursor: pointer;"
  >
    Search
  </button>
  <% if (searchTerm) { %>
    <a href="/" style="margin-left: 10px; color: #dc3545;">Clear</a>
  <% } %>
</form>

<a href="/new" class="add-message-link">New Message</a>
  

  <style>
    body {
      font-family: Arial, sans-serif;
      max-width: 800px;
      margin: 50px auto;
      padding: 20px;
    }
    h1 {
      color: #333;
    }
    .message {
      border: 1px solid #ddd;
      padding: 15px;
      margin: 10px 0;
      border-radius: 5px;
      background-color: #f9f9f9;
    }
    .message-user {
      font-weight: bold;
      color: #0066cc;
    }
    .message-date {
      font-size: 0.9em;
      color: #666;
    }
    .add-message-link {
      display: inline-block;
      margin: 20px 0;
      padding: 10px 20px;
      background-color: #0066cc;
      color: white;
      text-decoration: none;
      border-radius: 5px;
      transition: all 0.3s;
    }
    .add-message-link:hover {
        background-color: #094e94;
    }
    .open-link {
    display: inline-block;
    margin-top: 10px;
    padding: 5px 15px;
    background-color: #28a745;
    color: white;
    text-decoration: none;
    border-radius: 3px;
    font-size: 0.9em;
    }
    .open-link:hover {
    background-color: #218838;
    }
    .delete-link {
  display: inline-block;
  margin: 20px 10px;
  padding: 10px 20px;
  background-color: #dc3545;
  color: white;
  text-decoration: none;
  border-radius: 5px;
}
.delete-link:hover {
  background-color: #c82333;
}
  </style>
</head>
<body>
  <h1><%= title %></h1>
  
  <a href="/new" class="add-message-link">New Message</a>
  <a href="/delete" class="delete-link" onclick="return confirm('Are you sure you want to delete ALL messages?')">Delete All Messages</a>

  <% messages.forEach(function(message) { %>
  <div class="message">
    <p><%= message.message_text %></p>
    <p class="message-user">- <%= message.username %></p>
    <p class="message-date"><%= new Date(message.added).toLocaleString() %></p>
    <a href="/message/<%= message.id %>" class="open-link">Open</a>
  </div>
<% }); %>
</body>
</html>